# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

#
# Variables
#
	# These settings are commonly referenced, in the interest of keeping
	# them consistent they are defined as variables
	set $mod Mod4
	set $windowMod $mod
	set $commandMod $mod+Ctrl
	set $launchMod $mod+Alt

	set $left h
	set $down j
	set $up k
	set $right l

	set $term ghostty

	set $ws1 "1"
	set $ws2 "2"
	set $ws3 "3"
	set $ws4 "4"
	set $ws5 "5"
	set $ws6 "6"
	set $ws7 "7"
	set $ws8 "8"
	set $ws9 "9"
	set $ws10 "10"

#
# Environment
#
	# sway does not set DISPLAY/WAYLAND_DISPLAY in the systemd user environment
	# See FS#63021
	# Adapted from xorg's 50-systemd-user.sh, which achieves a similar goal.

	# Upstream refuses to set XDG_CURRENT_DESKTOP so we have to.
	exec systemctl --user set-environment XDG_CURRENT_DESKTOP=sway
	exec systemctl --user import-environment DISPLAY \
	                                         SWAYSOCK \
	                                         WAYLAND_DISPLAY \
	                                         XDG_CURRENT_DESKTOP
	exec hash dbus-update-activation-environment 2>/dev/null && \
	     dbus-update-activation-environment --systemd DISPLAY \
	                                                  SWAYSOCK \
	                                                  XDG_CURRENT_DESKTOP=sway \
	                                                  WAYLAND_DISPLAY

#
# External programs
#
	# This will lock your screen after 300 seconds of inactivity, then turn off
	# your displays, and turn your screens back on when resumed. It will also lock
	# your screen before your computer goes to sleep.
	exec swayidle -w \
	         timeout 300 'swaymsg "output * power off"' \
	         timeout 310 'wmexit lock' \
	         resume 'swaymsg "output * power on"' \
	         before-sleep 'wmexit lock'

	exec dunst

	# Watch the waybar config and relaunch when changed
	exec waybar

	# Only allow a single output per monitor
	exec_always $HOME/.config/sway/scripts/single-output-per-monitor

	exec /usr/lib/polkit-kde-authentication-agent-1

#
# Outputs
#
	# Set background
	output * bg /usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png fill

	# Set a bit of scaling for 4k monitor
	output DP-1 scale 1.20

#
# Inputs
# 
	# TODO: Remap capslock key
	input * {
		xkb_layout "gb"
	}

#
# Font
#
	# Font for window titles. Will also be used by the bar unless a different font
	# is used in the bar {} block below.
	# font pango:monospace 15

	# This font is widely installed, provides lots of unicode glyphs, right-to-left
	# text rendering and scalability on retina/hidpi displays (thanks to pango).
	font pango:DejaVu Sans Mono 12

#
# Borders
#
	# Removes title bars
	default_border pixel 1
	default_floating_border pixel 1

	# Show minimal borders
	hide_edge_borders none

	# There is a bug with default_border pixel 1
	# Refer to: https://github.com/i3/i3/issues/5149
	# for_window [all] border pixel 1

#
# Styling
#
	# class                  border   background  text     indicator  child_border
	client.focused           #02bedd  #333333     #ffffff  #ffffff    #02bedd
	client.focused_inactive  #000000  #333333     #ffffff  #000000    #000000

	for_window {
		[class="discord"] inhibit_idle focus
	}

#
# Window usability
#
	# Use Mouse to drag floating windows to their wanted position
	floating_modifier $windowMod normal

	# Do not wrap when changing focus off screen
	focus_wrapping no

	# Moving to the current workspace moves to the last one instead
	workspace_auto_back_and_forth yes

#
# Workspace and workspace manipulation
#
	bindsym $windowMod+1 workspace number $ws1
	bindsym $windowMod+2 workspace number $ws2
	bindsym $windowMod+3 workspace number $ws3
	bindsym $windowMod+4 workspace number $ws4
	bindsym $windowMod+5 workspace number $ws5
	bindsym $windowMod+6 workspace number $ws6
	bindsym $windowMod+7 workspace number $ws7
	bindsym $windowMod+8 workspace number $ws8
	bindsym $windowMod+9 workspace number $ws9
	bindsym $windowMod+0 workspace number $ws10

	# change focus
	bindsym $windowMod+$left focus left
	bindsym $windowMod+$down focus down
	bindsym $windowMod+$up focus up
	bindsym $windowMod+$right focus right
	bindsym $windowMod+a focus parent

	# move focused window
	bindsym $windowMod+Shift+$left move left
	bindsym $windowMod+Shift+$down move down
	bindsym $windowMod+Shift+$up move up
	bindsym $windowMod+Shift+$right move right

	# move focused window to different workspace
	bindsym $windowMod+Shift+1 move container to workspace number $ws1
	bindsym $windowMod+Shift+2 move container to workspace number $ws2
	bindsym $windowMod+Shift+3 move container to workspace number $ws3
	bindsym $windowMod+Shift+4 move container to workspace number $ws4
	bindsym $windowMod+Shift+5 move container to workspace number $ws5
	bindsym $windowMod+Shift+6 move container to workspace number $ws6
	bindsym $windowMod+Shift+7 move container to workspace number $ws7
	bindsym $windowMod+Shift+8 move container to workspace number $ws8
	bindsym $windowMod+Shift+9 move container to workspace number $ws9
	bindsym $windowMod+Shift+0 move container to workspace number $ws10

	# kill focused window
	bindsym $windowMod+q kill

	# TODO: Make switching focus keys work with fullscreen
	# enter fullscreen mode for the focused container
	bindsym $windowMod+f fullscreen toggle

	# enter floating mode
	bindsym $windowMod+t floating toggle

	# Swap focus between the tiling area and the floating area
	bindsym $windowMod+Shift+Space focus mode_toggle

	# Move the currently focused window to the scratchpad
	bindsym $windowMod+Shift+Minus move scratchpad

	# Show the next scratchpad window or hide the focused scratchpad window.
	# If there are multiple scratchpad windows, this command cycles through them.
	bindsym $windowMod+Minus scratchpad show

	# change container layout
	bindsym $windowMod+s layout stacking
	bindsym $windowMod+w layout tabbed
	bindsym $windowMod+e layout toggle split

	# split orientation
	bindsym $windowMod+x split v;exec notify-send 'tile vertically'
	bindsym $windowMod+v split h;exec notify-send 'tile horizontally'

	set $mode_resize "Resize (h) Grow Width, (j) Shrink Height, (k) Grow Height, (l) Shrink Width"
	bindsym $windowMod+r mode $mode_resize
	mode $mode_resize {
	        # These bindings trigger as soon as you enter the resize mode
	        bindsym $left resize grow width 10 px or 10 ppt
	        bindsym $down resize shrink height 10 px or 10 ppt
	        bindsym $up resize grow height 10 px or 10 ppt
	        bindsym $right resize shrink width 10 px or 10 ppt

	        # back to normal: Enter or Escape or $mod+r
	        bindsym Return mode "default"
	        bindsym Escape mode "default"
	        bindsym $mod+r mode "default"
	}

#
# Commands
#
	# reload the configuration file
	bindsym $commandMod+r reload

	# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
	bindsym $commandMod+Shift+r restart

	bindsym $commandMod+p exec --no-startup-id exec grim -g "$(slurp)" - | swappy -f -
	bindsym $commandMod+Shift+p exec --no-startup-id exec wm-screenshot-window

	# Handy zoom in for screen sharing
	bindsym $commandMod+s output DP-1 scale 1.20
	bindsym $commandMod+Shift+s output DP-1 scale 2.25

	bindsym $commandMod+Plus exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5%
	bindsym $commandMod+Minus exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5%
	bindsym $commandMod+Equal exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ 100%
	bindsym $commandMod+Underscore exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle
	bindsym $commandMod+0 exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle

	set $mode_system "System (l) lock, (e) logout, (s) suspend, (h) hibernate, (r) reboot, (p) poweroff"
	bindsym $commandMod+e mode $mode_system
	mode $mode_system {
	    bindsym l exec --no-startup-id wmexit lock, mode "default"
	    bindsym e exec --no-startup-id wmexit logout, mode "default"
	    bindsym s exec --no-startup-id wmexit suspend, mode "default"
	    bindsym h exec --no-startup-id wmexit hibernate, mode "default"
	    bindsym r exec --no-startup-id wmexit reboot, mode "default"
	    bindsym p exec --no-startup-id wmexit poweroff, mode "default"

	    # back to normal: Enter or Escape
	    bindsym Return mode "default"
	    bindsym Escape mode "default"
	}

#
# Application launching
#
	# start program launcher
	bindsym $launchMod+Space exec --no-startup-id exec wofi --show=drun --insensitive --allow-images

	bindsym $launchMod+d exec --no-startup-id exec discord
	bindsym $launchMod+s exec --no-startup-id exec spotify-launcher
	bindsym $launchMod+q exec --no-startup-id exec qutebrowser
	bindsym $launchMod+i exec --no-startup-id exec qutebrowser --temp-basedir
	bindsym $launchMod+Return exec --no-startup-id exec $term
